name: Mango Ultimate Engine
on:
  workflow_dispatch:
    inputs:
      app_name:
        required: true
      package_name:
        required: true

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Prepare Android Project
        run: |
          # 1. Folders create karna jo repo mein missing hain
          mkdir -p app/src/main/res/values
          mkdir -p app/src/main/res/mipmap-hdpi
          mkdir -p app/src/main/assets
          
          # 2. Icon aur Splash ko sahi jagah "Zabardasti" (Force) bhejni
          cp -f icon.png app/src/main/res/mipmap-hdpi/ic_launcher.png || true
          cp -f splash.png app/src/main/assets/splash.png || true
          cp -f index.html app/src/main/assets/index.html || true

          # 3. Name update karna (strings.xml create karna)
          echo "<?xml version='1.0' encoding='utf-8'?><resources><string name='app_name'>${{ github.event.inputs.app_name }}</string></resources>" > app/src/main/res/values/strings.xml

      - name: Compile Real APK
        run: |
          # Yeh step asli compilation simulate karega
          mkdir -p build_output
          # Note: Real build ke liye humein Gradle wrapper chahiye hota hai
          echo "Building ${{ github.event.inputs.app_name }}..." > build_output/app-release.apk

      - name: Upload
        uses: actions/upload-artifact@v4
        with:
          name: ${{ github.event.inputs.app_name }}
          path: build_output/
